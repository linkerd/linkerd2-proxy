[package]
name = "linkerd-client-policy"
version = "0.1.0"
authors = ["Linkerd Developers <cncf-linkerd-dev@lists.cncf.io>"]
license = "Apache-2.0"
edition = "2021"
publish = false

[features]
proto = [
    "linkerd-http-route/proto",
    "linkerd-policy-core/proto",
    "linkerd2-proxy-api",
    "prost-types",
]

[dependencies]
anyhow = "1"
async-stream = "0.3.1"
futures = "0.3"
http = "0.2"
indexmap = "1"
linkerd-addr = { path = "../addr" }
linkerd-error = { path = "../error" }
linkerd-http-route = { path = "../http-route" }
linkerd-proxy-api-resolve = { path = "../proxy/api-resolve" }
linkerd-policy-core = { path = "../policy-core" }
linkerd-stack = { path = "../stack" }
once_cell = "1"
prost-types = { version = "0.11", optional = true }
rand = { version = "0.8", features = ["small_rng"] }
thiserror = "1"
tokio = { version = "1", features = ["macros", "rt", "sync", "time"] }
tokio-util = { version = "0.7.4", features = []}
tonic = { version = "0.8", default-features = false }
tower = { version = "0.4.13", features = ["ready-cache", "retry", "util"] }
tracing = "0.1.37"

[dependencies.linkerd2-proxy-api]
version = "0.7"
features = ["outbound"]
optional = true